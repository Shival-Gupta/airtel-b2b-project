generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

// Represents an individual organization
model Organization {
  id                String        @id @default(uuid())
  org_id            String
  name              String
  address           String
  available_balance Float
  transactionIds    Int[]
  Transaction       Transaction[]
}

// Represents an individual payee entity
model Payee {
  id             String        @id @default(uuid())
  bank_type      BankTypeEnum
  bank_ifsc      String?
  ac_type        AcTypeEnum
  ac_no          String
  payee_name     String
  payee_nickname String
  payee_email    String
  payee_mob_no   String
  transactionIds Int[]
  Transaction    Transaction[]

  @@unique([bank_ifsc, ac_no])
}

// Represents a financial transaction
model Transaction {
  id               String        @id @default(uuid())
  transaction_date DateTime      @default(now())
  transaction_id   String
  description      String
  dr_cr            DrCrEnum
  amount           Float
  service_charge   Float
  gst              Float
  balance          Float
  payee            Payee?        @relation(fields: [payeeId], references: [id])
  payeeId          String?
  organization     Organization? @relation(fields: [organizationId], references: [id])
  organizationId   String?
}

enum DrCrEnum {
  Dr
  Cr
}

enum BankTypeEnum {
  apb
  oth
}

enum AcTypeEnum {
  sav
  wal
}
